(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();class w{constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.gainNode=this.audioContext.createGain(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount),this.timeData=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.bassGain=this.createEQBand(100),this.midGain=this.createEQBand(1e3),this.trebleGain=this.createEQBand(4e3)}createEQBand(t){const e=this.audioContext.createBiquadFilter();return e.type="peaking",e.frequency.value=t,e.Q.value=1,e.gain.value=0,e}async setupAudioSource(t){if(t instanceof File){const e=await t.arrayBuffer(),s=await this.audioContext.decodeAudioData(e),i=this.audioContext.createBufferSource();return i.buffer=s,this.connectSource(i),i}else if(t instanceof MediaStream){const e=this.audioContext.createMediaStreamSource(t);return this.connectSource(e),e}}connectSource(t){t.connect(this.bassGain),this.bassGain.connect(this.midGain),this.midGain.connect(this.trebleGain),this.trebleGain.connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.frequencyData),this.frequencyData}setVolume(t){this.gainNode.gain.value=t}setEQGain(t,e){const s={bass:this.bassGain,mid:this.midGain,treble:this.trebleGain}[t];s&&(s.gain.value=e)}}class b{constructor(t=140){this.fps=t,this.frameInterval=1e3/t,this.lastTime=0}shouldDrawFrame(t){const e=t-this.lastTime;return e>this.frameInterval?(this.lastTime=t-e%this.frameInterval,!0):!1}}function f(a,t,e){const s=a.slice(t,e);return s.reduce((i,n)=>i+n,0)/s.length}function C(a){return{bass:f(a,0,10),mid:f(a,11,100),treble:f(a,101,200)}}class P{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize()),this.rotation=.04,this.frameTimer=new b(60),this.isRunning=!0}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2}start(){this.isRunning=!0,this.animate()}stop(){this.isRunning=!1}animate(){this.isRunning&&requestAnimationFrame(t=>{this.drawFrame(t),this.animate()})}drawFrame(t){if(!this.frameTimer.shouldDrawFrame(t))return;this.ctx.fillStyle="rgba(0, 0, 0, 0.10)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const e=C(this.frequencyData);this.rotation+=e.mid*-4e-4+.01,this.drawPrism(e)}updateFrequencyData(t){this.frequencyData=t}drawPrism({bass:t,mid:e,treble:s}){const i=Math.min(this.canvas.width,this.canvas.height)*.085,n=7;this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.rotation),this.ctx.beginPath();for(let d=0;d<n;d++){const l=d*2*Math.PI/n-Math.PI/2,c=i*(.00789+t*.1234567),h=Math.cos(l)*c,g=Math.sin(l)*c;d===0?this.ctx.moveTo(h,g):this.ctx.lineTo(h,g)}this.ctx.closePath();const o=this.ctx.createLinearGradient(-i,-i,i,i);o.addColorStop(0,`hsl(${t*.4}, 85%, 45%)`),o.addColorStop(.3,`hsl(${e+600}, 70%, 55%)`),o.addColorStop(.6,`hsl(${s+200}, 75%, 40%)`),o.addColorStop(.9,`hsl(${(t+900)%1e3}, 75%, 35%)`),this.ctx.strokeStyle=o,this.ctx.lineWidth=12,this.ctx.stroke(),this.drawInnerPatterns(i*1,e,s),this.ctx.restore()}drawInnerPatterns(t,e,s){const n=Math.PI*1/1;for(let o=0;o<1;o++){const d=o*n,l=1+e*.0205;this.ctx.save(),this.ctx.rotate(d),this.ctx.beginPath(),this.ctx.moveTo(0,-t*l),this.ctx.lineTo(t*Math.cos(Math.PI/6)*l,t*Math.sin(Math.PI/6)*l),this.ctx.lineTo(-t*Math.cos(Math.PI/6)*l,t*Math.sin(Math.PI/6)*l),this.ctx.closePath();const c=this.ctx.createLinearGradient(0,-t,0,t);c.addColorStop(0,`hsla(${(s+600)%300}, 100%, 20%, 0.8)`),c.addColorStop(.5,`hsla(${(e+200)%300}, 90%, 15%, 0.6)`),c.addColorStop(1,`hsla(${(s+900)%900}, 95%, 25%, 0.7)`);const h=Math.sin(Date.now()*.009)*.8+20.8;c.addColorStop(.2,`hsla(90, 100%, 50%, ${h})`),c.addColorStop(.7,"hsla(253, 73.70%, 26.90%, 0.92)"),c.addColorStop(.9,`hsla(80, 90%, 40%, ${h})`),this.ctx.shadowBlur=5+Math.sin(Date.now()*.185)*10,this.ctx.shadowColor=`hsla(${s}, 10%, 450%, 1.2)`,this.ctx.strokeStyle=`hsla(${e}, 60%, 1%, 0.77)`,this.ctx.lineWidth=35,this.ctx.stroke(),this.ctx.fillStyle=c,this.ctx.fill(),this.ctx.restore()}}}const u=new w,p=document.createElement("canvas");document.body.appendChild(p);const v=new P(p),y=document.createElement("div");y.className="audio-controls";y.innerHTML=`
  <input type="file" accept=".mp3,.wav,.ogg" id="audioFile">
  <button id="micButton">Use Microphone</button>
  <button id="playPause" disabled>Play</button>
  <div class="slider-container">
    <label>Volume: <input type="range" id="volume" min="0" max="100" value="100"></label>
  </div>
  <div class="eq-controls">
    <label>Bass: <input type="range" id="bassGain" min="-12" max="12" value="0"></label>
    <label>Mid: <input type="range" id="midGain" min="-12" max="12" value="0"></label>
    <label>Treble: <input type="range" id="trebleGain" min="-12" max="12" value="0"></label>
  </div>
  <div id="timeDisplay">0:00 / 0:00</div>
  <div id="progressBar"></div>
`;document.body.appendChild(y);let r=null,m=!1;document.getElementById("audioFile").addEventListener("change",async a=>{var t;a.target.files[0]&&(r&&((t=r.stop)==null||t.call(r)),r=await u.setupAudioSource(a.target.files[0]),document.getElementById("playPause").disabled=!1)});document.getElementById("micButton").addEventListener("click",async()=>{try{const a=await navigator.mediaDevices.getUserMedia({audio:!0});r&&r.disconnect(),r=await u.setupAudioSource(a),m=!0,document.getElementById("playPause").textContent="Stop",document.getElementById("playPause").disabled=!1}catch(a){console.error("Microphone access denied:",a)}});document.getElementById("playPause").addEventListener("click",()=>{var a;r&&(m?((a=r.stop)==null||a.call(r),m=!1,document.getElementById("playPause").textContent="Play"):(r.start&&r.start(0),m=!0,document.getElementById("playPause").textContent="Pause"))});document.getElementById("volume").addEventListener("input",a=>{u.setVolume(a.target.value/100)});["bass","mid","treble"].forEach(a=>{document.getElementById(`${a}Gain`).addEventListener("input",t=>{u.setEQGain(a,parseInt(t.target.value))})});function x(){v.updateFrequencyData(u.getFrequencyData()),requestAnimationFrame(x)}v.start();x();
